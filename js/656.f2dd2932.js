"use strict";(self["webpackChunkmumu"]=self["webpackChunkmumu"]||[]).push([[656],{655:function(t,r,e){var n=e(6955),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},1108:function(t,r,e){var n=e(6955);t.exports=function(t){var r=n(t);return"BigInt64Array"===r||"BigUint64Array"===r}},1548:function(t,r,e){var n=e(4576),o=e(9039),i=e(9519),a=e(4215),s=n.structuredClone;t.exports=!!s&&!o((function(){if("DENO"===a&&i>92||"NODE"===a&&i>94||"BROWSER"===a&&i>97)return!1;var t=new ArrayBuffer(8),r=s(t,{transfer:[t]});return 0!==t.byteLength||8!==r.byteLength}))},2489:function(t,r,e){var n=e(6518),o=e(9565),i=e(9306),a=e(8551),s=e(1767),c=e(9462),u=e(6319),l=e(6395),f=c((function(){var t,r,e,n=this.iterator,i=this.predicate,s=this.next;while(1){if(t=a(o(s,n)),r=this.done=!!t.done,r)return;if(e=t.value,u(n,i,[e,this.counter++],!0))return e}}));n({target:"Iterator",proto:!0,real:!0,forced:l},{filter:function(t){return a(this),i(t),new f(s(this),{predicate:t})}})},2529:function(t){t.exports=function(t,r){return{value:t,done:r}}},2603:function(t,r,e){var n=e(655);t.exports=function(t,r){return void 0===t?arguments.length<2?"":r:n(t)}},2812:function(t){var r=TypeError;t.exports=function(t,e){if(t<e)throw new r("Not enough arguments");return t}},2967:function(t,r,e){var n=e(6706),o=e(34),i=e(7750),a=e(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,e={};try{t=n(Object.prototype,"__proto__","set"),t(e,[]),r=e instanceof Array}catch(s){}return function(e,n){return i(e),a(n),o(e)?(r?t(e,n):e.__proto__=n,e):e}}():void 0)},3167:function(t,r,e){var n=e(4901),o=e(34),i=e(2967);t.exports=function(t,r,e){var a,s;return i&&n(a=r.constructor)&&a!==e&&o(s=a.prototype)&&s!==e.prototype&&i(t,s),t}},3238:function(t,r,e){var n=e(4576),o=e(7811),i=e(7394),a=n.DataView;t.exports=function(t){if(!o||0!==i(t))return!1;try{return new a(t),!1}catch(r){return!0}}},3506:function(t,r,e){var n=e(3925),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},3579:function(t,r,e){var n=e(6518),o=e(2652),i=e(9306),a=e(8551),s=e(1767);n({target:"Iterator",proto:!0,real:!0},{some:function(t){a(this),i(t);var r=s(this),e=0;return o(r,(function(r,n){if(t(r,e++))return n()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3925:function(t,r,e){var n=e(34);t.exports=function(t){return n(t)||null===t}},4215:function(t,r,e){var n=e(4576),o=e(2839),i=e(2195),a=function(t){return o.slice(0,t.length)===t};t.exports=function(){return a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"}()},4483:function(t,r,e){var n,o,i,a,s=e(4576),c=e(9429),u=e(1548),l=s.structuredClone,f=s.ArrayBuffer,d=s.MessageChannel,h=!1;if(u)h=function(t){l(t,{transfer:[t]})};else if(f)try{d||(n=c("worker_threads"),n&&(d=n.MessageChannel)),d&&(o=new d,i=new f(2),a=function(t){o.port1.postMessage(null,[t])},2===i.byteLength&&(a(i),0===i.byteLength&&(h=a)))}catch(p){}t.exports=h},4603:function(t,r,e){var n=e(6840),o=e(9504),i=e(655),a=e(2812),s=URLSearchParams,c=s.prototype,u=o(c.append),l=o(c["delete"]),f=o(c.forEach),d=o([].push),h=new s("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&n(c,"delete",(function(t){var r=arguments.length,e=r<2?void 0:arguments[1];if(r&&void 0===e)return l(this,t);var n=[];f(this,(function(t,r){d(n,{key:r,value:t})})),a(r,1);var o,s=i(t),c=i(e),h=0,p=0,y=!1,g=n.length;while(h<g)o=n[h++],y||o.key===s?(y=!0,l(this,o.key)):p++;while(p<g)o=n[p++],o.key===s&&o.value===c||u(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},4644:function(t,r,e){var n,o,i,a=e(7811),s=e(3724),c=e(4576),u=e(4901),l=e(34),f=e(9297),d=e(6955),h=e(6823),p=e(6699),y=e(6840),g=e(2106),v=e(1625),m=e(2787),w=e(2967),E=e(8227),A=e(3392),C=e(1181),R=C.enforce,_=C.get,x=c.Int8Array,T=x&&x.prototype,b=c.Uint8ClampedArray,I=b&&b.prototype,L=x&&m(x),S=T&&m(T),N=Object.prototype,O=c.TypeError,D=E("toStringTag"),M=A("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",k=a&&!!w&&"Opera"!==d(c.opera),U=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},V=function(t){if(!l(t))return!1;var r=d(t);return"DataView"===r||f(H,r)||f(F,r)},P=function(t){var r=m(t);if(l(r)){var e=_(r);return e&&f(e,B)?e[B]:P(r)}},K=function(t){if(!l(t))return!1;var r=d(t);return f(H,r)||f(F,r)},q=function(t){if(K(t))return t;throw new O("Target is not a typed array")},J=function(t){if(u(t)&&(!w||v(L,t)))return t;throw new O(h(t)+" is not a typed array constructor")},$=function(t,r,e,n){if(s){if(e)for(var o in H){var i=c[o];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(a){try{i.prototype[t]=r}catch(u){}}}S[t]&&!e||y(S,t,e?r:k&&T[t]||r,n)}},W=function(t,r,e){var n,o;if(s){if(w){if(e)for(n in H)if(o=c[n],o&&f(o,t))try{delete o[t]}catch(i){}if(L[t]&&!e)return;try{return y(L,t,e?r:k&&L[t]||r)}catch(i){}}for(n in H)o=c[n],!o||o[t]&&!e||y(o,t,r)}};for(n in H)o=c[n],i=o&&o.prototype,i?R(i)[B]=o:k=!1;for(n in F)o=c[n],i=o&&o.prototype,i&&(R(i)[B]=o);if((!k||!u(L)||L===Function.prototype)&&(L=function(){throw new O("Incorrect invocation")},k))for(n in H)c[n]&&w(c[n],L);if((!k||!S||S===N)&&(S=L.prototype,k))for(n in H)c[n]&&w(c[n].prototype,S);if(k&&m(I)!==S&&w(I,S),s&&!f(S,D))for(n in U=!0,g(S,D,{configurable:!0,get:function(){return l(this)?this[M]:void 0}}),H)c[n]&&p(c[n],M,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:U&&M,aTypedArray:q,aTypedArrayConstructor:J,exportTypedArrayMethod:$,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:P,isView:V,isTypedArray:K,TypedArray:L,TypedArrayPrototype:S}},4732:function(t,r,e){var n=e(4644),o=e(9504),i=e(9306),a=e(5370),s=n.aTypedArray,c=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,l=o(n.TypedArrayPrototype.sort);u("toSorted",(function(t){void 0!==t&&i(t);var r=s(this),e=a(c(r),r);return l(e,t)}))},4979:function(t,r,e){var n=e(6518),o=e(4576),i=e(7751),a=e(6980),s=e(4913).f,c=e(9297),u=e(679),l=e(3167),f=e(2603),d=e(5002),h=e(8574),p=e(3724),y=e(6395),g="DOMException",v=i("Error"),m=i(g),w=function(){u(this,E);var t=arguments.length,r=f(t<1?void 0:arguments[0]),e=f(t<2?void 0:arguments[1],"Error"),n=new m(r,e),o=new v(r);return o.name=g,s(n,"stack",a(1,h(o.stack,1))),l(n,this,w),n},E=w.prototype=m.prototype,A="stack"in new v(g),C="stack"in new m(1,2),R=m&&p&&Object.getOwnPropertyDescriptor(o,g),_=!!R&&!(R.writable&&R.configurable),x=A&&!_&&!C;n({global:!0,constructor:!0,forced:y||x},{DOMException:x?w:m});var T=i(g),b=T.prototype;if(b.constructor!==T)for(var I in y||s(b,"constructor",a(1,T)),d)if(c(d,I)){var L=d[I],S=L.s;c(T,S)||s(T,S,a(6,L.c))}},5002:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5169:function(t,r,e){var n=e(3238),o=TypeError;t.exports=function(t){if(n(t))throw new o("ArrayBuffer is detached");return t}},5370:function(t,r,e){var n=e(6198);t.exports=function(t,r,e){var o=0,i=arguments.length>2?e:n(r),a=new t(i);while(i>o)a[o]=r[o++];return a}},5636:function(t,r,e){var n=e(4576),o=e(9504),i=e(6706),a=e(7696),s=e(5169),c=e(7394),u=e(4483),l=e(1548),f=n.structuredClone,d=n.ArrayBuffer,h=n.DataView,p=Math.min,y=d.prototype,g=h.prototype,v=o(y.slice),m=i(y,"resizable","get"),w=i(y,"maxByteLength","get"),E=o(g.getInt8),A=o(g.setInt8);t.exports=(l||u)&&function(t,r,e){var n,o=c(t),i=void 0===r?o:a(r),y=!m||!m(t);if(s(t),l&&(t=f(t,{transfer:[t]}),o===i&&(e||y)))return t;if(o>=i&&(!e||y))n=v(t,0,i);else{var g=e&&!y&&w?{maxByteLength:w(t)}:void 0;n=new d(i,g);for(var C=new h(t),R=new h(n),_=p(i,o),x=0;x<_;x++)A(R,x,E(C,x))}return l||u(t),n}},5854:function(t,r,e){var n=e(2777),o=TypeError;t.exports=function(t){var r=n(t,"number");if("number"==typeof r)throw new o("Can't convert number to bigint");return BigInt(r)}},6193:function(t,r,e){var n=e(4215);t.exports="NODE"===n},6279:function(t,r,e){var n=e(6840);t.exports=function(t,r,e){for(var o in r)n(t,o,r[o],e);return t}},6319:function(t,r,e){var n=e(8551),o=e(9539);t.exports=function(t,r,e,i){try{return i?r(n(e)[0],e[1]):r(e)}catch(a){o(t,"throw",a)}}},6573:function(t,r,e){var n=e(3724),o=e(2106),i=e(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&o(a,"detached",{configurable:!0,get:function(){return i(this)}})},6706:function(t,r,e){var n=e(9504),o=e(9306);t.exports=function(t,r,e){try{return n(o(Object.getOwnPropertyDescriptor(t,r)[e]))}catch(i){}}},7394:function(t,r,e){var n=e(4576),o=e(6706),i=e(2195),a=n.ArrayBuffer,s=n.TypeError;t.exports=a&&o(a.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new s("ArrayBuffer expected");return t.byteLength}},7467:function(t,r,e){var n=e(7628),o=e(4644),i=o.aTypedArray,a=o.exportTypedArrayMethod,s=o.getTypedArrayConstructor;a("toReversed",(function(){return n(i(this),s(this))}))},7566:function(t,r,e){var n=e(6840),o=e(9504),i=e(655),a=e(2812),s=URLSearchParams,c=s.prototype,u=o(c.getAll),l=o(c.has),f=new s("a=1");!f.has("a",2)&&f.has("a",void 0)||n(c,"has",(function(t){var r=arguments.length,e=r<2?void 0:arguments[1];if(r&&void 0===e)return l(this,t);var n=u(this,t);a(r,1);var o=i(e),s=0;while(s<n.length)if(n[s++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},7588:function(t,r,e){var n=e(6518),o=e(2652),i=e(9306),a=e(8551),s=e(1767);n({target:"Iterator",proto:!0,real:!0},{forEach:function(t){a(this),i(t);var r=s(this),e=0;o(r,(function(r){t(r,e++)}),{IS_RECORD:!0})}})},7628:function(t,r,e){var n=e(6198);t.exports=function(t,r){for(var e=n(t),o=new r(e),i=0;i<e;i++)o[i]=t[e-i-1];return o}},7656:function(t,r,e){e.r(r),e.d(r,{default:function(){return l}});var n=function(){var t=this,r=t._self._c;return r("div",{staticClass:"mobile-game-config"},[r("header",{staticClass:"header-bar"},[r("button",{staticClass:"back-btn",on:{click:t.goBack}},[r("svg",{attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"}})])]),r("h1",{staticClass:"header-title"},[t._v("配置设置")]),r("div",{staticClass:"header-placeholder"})]),r("main",{staticClass:"main-content"},[r("div",{ref:"homeview",staticClass:"home-view"},[r("div",{staticClass:"category-list"},t._l(t.categories,(function(e,n){return r("div",{key:n,staticClass:"category-item",class:{"missing-required":t.hasMissingRequiredFields(e)}},[r("div",{staticClass:"category-header"},[r("div",{staticClass:"category-icon",style:{backgroundColor:e.color}},[r("div",{staticClass:"icon-placeholder"},[t._v(t._s(e.name.charAt(0)))])]),r("div",{staticClass:"category-details",on:{click:function(r){return t.toggleCategory(e)}}},[r("h3",[t._v(t._s(e.name))]),t.hasMissingRequiredFields(e)?r("span",{staticClass:"missing-indicator"},[t._v("有未填写项")]):t._e()]),r("div",{staticClass:"category-actions"},[e.type?t._e():r("button",{staticClass:"edit-btn",on:{click:function(r){return r.stopPropagation(),t.editCategory(n)}}},[r("svg",{attrs:{viewBox:"0 0 24 24",width:"16",height:"16"}},[r("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})])]),r("button",{staticClass:"clear-btn",on:{click:function(r){return r.stopPropagation(),t.showClearCategoryConfirm(n)}}},[r("svg",{attrs:{viewBox:"0 0 24 24",width:"16",height:"16"}},[r("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})])])]),r("div",{staticClass:"category-arrow",on:{click:function(r){return t.toggleCategory(e)}}},[r("svg",{style:{transform:e.expanded?"rotate(180deg)":"rotate(0deg)"},attrs:{viewBox:"0 0 24 24",width:"20",height:"20"}},[r("path",{attrs:{d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"}})])])]),r("transition",{attrs:{name:"slide"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"category.expanded"}],staticClass:"category-features"},[r("div",{staticClass:"features-grid"},t._l(e.features,(function(e,o){return r("div",{key:o,staticClass:"feature-item",class:{"missing-field":t.isFeatureMissing(e)}},[r("div",{staticClass:"feature-content"},[e.imageUrl?r("div",{staticClass:"feature-image"},[r("img",{attrs:{src:e.imageUrl}})]):r("div",{staticClass:"feature-icon",style:{backgroundColor:e.color}},[t._v(" "+t._s(e.name.charAt(0))+" ")]),r("div",{staticClass:"feature-info"},[r("h4",[t._v(t._s(e.name))]),e.coordinates?r("div",{staticClass:"coordinates"},[r("span",{class:{"missing-value":!e.coordinates.x}},[t._v("X: "+t._s(e.coordinates.x||"未填写"))]),r("span",{class:{"missing-value":!e.coordinates.y}},[t._v("Y: "+t._s(e.coordinates.y||"未填写"))])]):e.imageUrl?t._e():r("div",{staticClass:"missing-value"},[t._v(" 图片未上传 ")])])]),r("div",{staticClass:"feature-actions"},[r("button",{staticClass:"edit-btn",on:{click:function(r){return r.stopPropagation(),t.editFeature(n,o)}}},[r("svg",{attrs:{viewBox:"0 0 24 24",width:"14",height:"14"}},[r("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}})]),r("span",[t._v("编辑")])]),r("button",{staticClass:"clear-btn",on:{click:function(r){return r.stopPropagation(),t.showClearFeatureConfirm(n,o)}}},[r("svg",{attrs:{viewBox:"0 0 24 24",width:"14",height:"14"}},[r("path",{attrs:{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}})]),r("span",[t._v("清空")])])])])})),0)])])],1)})),0)])]),r("transition",{attrs:{name:"fade"}},[t.showConfirmDialog?r("div",{staticClass:"confirm-dialog"},[r("div",{staticClass:"dialog-content"},[r("h3",{staticClass:"dialog-title"},[t._v(t._s(t.confirmTitle))]),r("p",{staticClass:"dialog-message"},[t._v(t._s(t.confirmMessage))]),r("div",{staticClass:"dialog-actions"},[r("button",{staticClass:"dialog-btn cancel",on:{click:t.cancelConfirm}},[t._v("取消")]),r("button",{staticClass:"dialog-btn confirm",on:{click:t.executeConfirmAction}},[t._v("确定")])])])]):t._e()]),r("transition",{attrs:{name:"fade"}},[t.showBottomButton?r("button",{staticClass:"bottom-button",on:{click:t.handleBottomButtonClick}},[r("svg",{staticClass:"download-icon",attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{d:"M19,9H15V3H9V9H5L12,16L19,9M5,18V20H19V18H5Z"}})]),r("span",[t._v("下载文件")])]):t._e()])],1)},o=[],i=(e(4114),e(8111),e(2489),e(7588),e(3579),e(4603),e(7566),e(8721),e(6573),e(8100),e(7936),e(7467),e(4732),e(9577),e(4979),{async getKey(t){const r=new TextEncoder,e=await window.crypto.subtle.importKey("raw",r.encode(t),{name:"PBKDF2"},!1,["deriveKey"]);return await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:r.encode("salt"),iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},async encryptJSON(t,r){try{const e=await this.getKey(r),n=window.crypto.getRandomValues(new Uint8Array(12)),o=new TextEncoder,i=o.encode(JSON.stringify(t)),a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,i),s=new Uint8Array(n.length+a.byteLength);return s.set(n,0),s.set(new Uint8Array(a),n.length),btoa(String.fromCharCode.apply(null,s))}catch(e){throw e}},async decryptJSON(t,r){try{const e=await this.getKey(r),n=atob(t),o=new Uint8Array(n.length);for(let t=0;t<n.length;t++)o[t]=n.charCodeAt(t);const i=o.slice(0,12),a=o.slice(12),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,a),c=new TextDecoder;return JSON.parse(c.decode(s))}catch(e){throw e}}}),a={name:"MobileGamePage",data(){return{pickerType:"",tempPickerValue:null,showConfirmDialog:!1,showBottomButton:!1,password:"",confirmTitle:"",confirmMessage:"",pendingAction:null,pendingActionArgs:[],categories:[],downloadKey:""}},created(){localStorage.getItem(this.getLocalStorageKey())?this.categories=JSON.parse(localStorage.getItem(this.getLocalStorageKey())):(this.categories=JSON.parse(this.$route.query.categories),localStorage.setItem(this.getLocalStorageKey(),JSON.stringify(this.categories))),this.password=this.$route.query.password||"",this.downloadKey=this.$route.query.downloadKey||""},mounted(){this.checkEnvironment()},methods:{goBack(){this.$goBackOrHome()},getLocalStorageKey(){return this.$route.query.localStorageKey},toggleCategory(t){t.expanded=!t.expanded},editCategory(t){this.$router.push({path:"/mark",query:{type:0,setitem:this.getLocalStorageKey(),catIndex:t,str:JSON.stringify(this.categories[t])}})},editFeature(t,r){this.categories[t].features[r].coordinates?this.$router.push({path:"/mark",query:{type:1,setitem:this.getLocalStorageKey(),catIndex:t,featIndex:r,str:JSON.stringify(this.categories[t].features[r])}}):this.$router.push({path:"/cropping",query:{type:1,catIndex:t,featIndex:r,str:JSON.stringify(this.categories[t].features[r])}})},hasMissingRequiredFields(t){return t.features.some((t=>this.isFeatureMissing(t)))},isFeatureMissing(t){return t.coordinates?null===t.coordinates.x||null===t.coordinates.y:!t.imageUrl},showClearCategoryConfirm(t){this.confirmTitle="清空分类内容",this.confirmMessage="确定要清空此分类下的所有坐标和图片吗？",this.pendingAction=this.clearCategory,this.pendingActionArgs=[t],this.showConfirmDialog=!0},showClearFeatureConfirm(t,r){this.confirmTitle="清空功能项",this.confirmMessage="确定要清空此项的坐标或图片吗？",this.pendingAction=this.clearFeature,this.pendingActionArgs=[t,r],this.showConfirmDialog=!0},executeConfirmAction(){this.pendingAction&&this.pendingAction(...this.pendingActionArgs),localStorage.setItem(this.getLocalStorageKey(),JSON.stringify(this.categories)),this.showConfirmDialog=!1},cancelConfirm(){this.showConfirmDialog=!1},clearCategory(t){this.categories[t].features.forEach((t=>{t.coordinates&&(t.coordinates.x=null,t.coordinates.y=null),t.imageUrl&&(t.imageUrl=null)})),this.showNotification("分类内容已清空","success")},clearFeature(t,r){const e=this.categories[t].features[r];e.coordinates&&(e.coordinates.x=null,e.coordinates.y=null),e.imageUrl&&(e.imageUrl=null),this.showNotification("内容已清空","success")},clearAll(){this.categories.forEach((t=>{t.features.forEach((t=>{t.coordinates&&(t.coordinates.x=null,t.coordinates.y=null),t.imageUrl&&(t.imageUrl=null)}))})),this.showNotification("所有内容已清空","success")},showNotification(t,r="success"){this.$toast(t,r)},checkEnvironment(){const t=/MicroMessenger/i.test(navigator.userAgent),r=/Android/i.test(navigator.userAgent);this.showBottomButton=!t&&!r,this.showBottomButton?this.$refs.homeview.style.padding="0 0 40px":this.$refs.homeview.style.padding="0"},async handleBottomButtonClick(){try{const t=this.categories.filter((t=>this.hasMissingRequiredFields(t)));if(t.length>0)return t.forEach((t=>{t.expanded=!0})),void this.showNotification("请先填写所有必填项","error");const r=await i.encryptJSON(this.categories,this.password);this.downloadEncryptedData(r),this.showNotification("配置已加密下载","success")}catch(t){this.showNotification("加密失败: "+t.message,"error")}},downloadEncryptedData(t){try{const r=new Blob([t],{type:"text/plain"}),e=URL.createObjectURL(r),n=document.createElement("a");n.href=e,n.download=`${this.downloadKey||"limumu"}.txt`,document.body.appendChild(n),n.click(),setTimeout((()=>{document.body.removeChild(n),URL.revokeObjectURL(e)}),100)}catch(r){this.showNotification("创建下载失败","error")}}}},s=a,c=e(1656),u=(0,c.A)(s,n,o,!1,null,"681ee1b4",null),l=u.exports},7696:function(t,r,e){var n=e(1291),o=e(8014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var r=n(t),e=o(r);if(r!==e)throw new i("Wrong length or index");return e}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:function(t,r,e){var n=e(6518),o=e(5636);o&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(t,r,e){var n=e(6518),o=e(5636);o&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},8574:function(t,r,e){var n=e(9504),o=Error,i=n("".replace),a=function(t){return String(new o(t).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);t.exports=function(t,r){if(c&&"string"==typeof t&&!o.prepareStackTrace)while(r--)t=i(t,s,"");return t}},8721:function(t,r,e){var n=e(3724),o=e(9504),i=e(2106),a=URLSearchParams.prototype,s=o(a.forEach);n&&!("size"in a)&&i(a,"size",{get:function(){var t=0;return s(this,(function(){t++})),t},configurable:!0,enumerable:!0})},9429:function(t,r,e){var n=e(4576),o=e(6193);t.exports=function(t){if(o){try{return n.process.getBuiltinModule(t)}catch(r){}try{return Function('return require("'+t+'")')()}catch(r){}}}},9462:function(t,r,e){var n=e(9565),o=e(2360),i=e(6699),a=e(6279),s=e(8227),c=e(1181),u=e(5966),l=e(7657).IteratorPrototype,f=e(2529),d=e(9539),h=s("toStringTag"),p="IteratorHelper",y="WrapForValidIterator",g=c.set,v=function(t){var r=c.getterFor(t?y:p);return a(o(l),{next:function(){var e=r(this);if(t)return e.nextHandler();if(e.done)return f(void 0,!0);try{var n=e.nextHandler();return e.returnHandlerResult?n:f(n,e.done)}catch(o){throw e.done=!0,o}},return:function(){var e=r(this),o=e.iterator;if(e.done=!0,t){var i=u(o,"return");return i?n(i,o):f(void 0,!0)}if(e.inner)try{d(e.inner.iterator,"normal")}catch(a){return d(o,"throw",a)}return o&&d(o,"normal"),f(void 0,!0)}})},m=v(!0),w=v(!1);i(w,h,"Iterator Helper"),t.exports=function(t,r,e){var n=function(n,o){o?(o.iterator=n.iterator,o.next=n.next):o=n,o.type=r?y:p,o.returnHandlerResult=!!e,o.nextHandler=t,o.counter=0,o.done=!1,g(this,o)};return n.prototype=r?m:w,n}},9577:function(t,r,e){var n=e(9928),o=e(4644),i=e(1108),a=e(1291),s=e(5854),c=o.aTypedArray,u=o.getTypedArrayConstructor,l=o.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();l("with",{with:function(t,r){var e=c(this),o=a(t),l=i(e)?s(r):+r;return n(e,u(e),o,l)}}["with"],!f)},9928:function(t,r,e){var n=e(6198),o=e(1291),i=RangeError;t.exports=function(t,r,e,a){var s=n(t),c=o(e),u=c<0?s+c:c;if(u>=s||u<0)throw new i("Incorrect index");for(var l=new r(s),f=0;f<s;f++)l[f]=f===u?a:t[f];return l}}}]);